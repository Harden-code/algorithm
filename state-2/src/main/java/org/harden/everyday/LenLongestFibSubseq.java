package org.harden.everyday;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * @author ：junsenfu
 * @date ：Created in 2022/7/26 19:38
 * 文件说明： </p>
 */
public class LenLongestFibSubseq {



    //    输入: arr = [1,3,7,11,12,14,18]
    //    输出: 3
    //    解释: 最长的斐波那契式子序列有 [1,11,12]、[3,11,14] 以及 [7,11,18] fn=f(n-1)+f(n-2) n=0 n=1
    public int lenLongestFibSubseq(int[] arr) {
//        int[][] dp=new int[arr.length][arr.length];

        //建立索引
        Map<Integer, Integer> map = new HashMap<>();
        for (int i = 0; i < arr.length; i++) {
            map.put(arr[i], i);
        }

        //填充1
        //1,2,3,4,5,6,7,8
        for (int j = 2; j<arr.length; j--) {

        }




//        for (int i = 0; i < dp.length; i++) {
//            count=Math.max(dp[i],dp[i]);
//        }
        return count;
    }


    private int count;

    //回溯
    public int lenLongestFibSubseq_(int[] arr) {
        for (int i = 0; i < arr.length; i++) {
            int value = arr[i];
            List<Integer> path = new ArrayList<>();
            path.add(value);
            dfs(arr, arr.length, path, i + 1);
        }
        return count;
    }

    private void dfs(int[] arr, int len, List<Integer> path, int k) {
        // [1,11,12] [3,11,14] [7,11,18]
        if (k == len) {
            if (path.size() > 2) {
                count = Integer.max(count, path.size());
                System.out.println(path.toString());
            }
            return;
        }
        //截枝
        if (path.size() >= 2 && is_out(path, arr[k])) {
            return;
        }
        for (int i = k; i < arr.length; i++) {
            int value = arr[i];
            if (path.size() < 2 || is(path, value)) {
                path.add(value);
                dfs(arr, len, path, i + 1);
                path.remove(path.size() - 1);
            }
        }
        //遍历完成 不满前置退出条件k==len 后面入的不满足条件
        if (path.size() > 2) {
            count = Integer.max(count, path.size());
            System.out.println(path.toString());
        }
    }

    private boolean is_out(List<Integer> path, int target) {
        int i1 = path.get(path.size() - 1);
        int i2 = path.get(path.size() - 2);
        return i1 + i2 < target;
    }

    private boolean is(List<Integer> path, int target) {
        int i1 = path.get(path.size() - 1);
        int i2 = path.get(path.size() - 2);
        return i1 + i2 == target;
    }

    public static void main(String[] args) {
        LenLongestFibSubseq projectFilterController = new LenLongestFibSubseq();
        int[] arr = {1,2,3,4,5,6,7,8};
//        int[] arr = {1, 2, 3, 4, 5, 6, 7, 8};
//        int[] arr={2,3,5,6,8,10,13,21,34,36,41,48,53,55,59,62,71,76,77,79,82,85,88,89,90,92,94,100,107,127,135,144,151,155,170,174,175,177,178,213,229,233,254,258,262,265,266,285,302,364,377,417,428,431,440,463,477,577,593,679,685,686,705,706,748,779,941,957,1096,1114,1116,1145,1146,1211,1256,1518,1550,1775,1800,1801,1850,1852,1959,2035,2459,2507,2871,2914,2917,2995,2998,3170,3291,3977,4057,4646,4714,4718,4845,4850,5129,5326,6436,6564,7517,7628,7635,7840,7848,8299,8617,10413,10621,12163,12342,12353,12685,12698,13428,13943,16849,17185,19680,19970,19988,20525,20546,21727,27262,27806,31843,32312,32341,33210,33244,35155,44111,44991,51523,52282,52329,53735,53790,56882,71373,72797,83366,84594,84670,86945,87034,92037,115484,117788,134889,136876,136999,140680,140824,148919,186857,190585,218255,221470,221669,227625,227858,240956,308373,353144,358346,358668,368305,368682,389875,571399,579816,595930,596540,630831,924543,938162,964235,965222,1205687,1495942,1517978,1560165,1561762,2420485,2456140,2524400,2526984,3504731,3831446,3916427,3974118,4002090,4084565,4509148,4559662,5348874,6336912,6430258,6608965,9639665,10166759,10253339,10693530,11791075,12573186,15167813,15784914,16590251,17242347,17302495,17453914,17960008,18395525,22466942,24130340,24814929,25055001,26147497,26843590,28600458,29632548,30143678,31619589,33316575,33324705,33929823,34491960,36660636,37023576,38566553,39005554,39161190,39751927,41424002,42470682,43433841,44450796,44603755,49542081,51204445,53280589,54160086,54354920,55016892,55350758,55688772,58155893,58213146,59293127,59410084,59813293,61358327,61752966,62585447,62856338,63699870,64127901,69342941,70257310,71644382,71860863,72963580,73173493,73923256,74629208,75078994,77252482,78358668,78535889,78780034,81857328,84163423,87339761,91189193,91410480,92243700,92322190,94442269,94942054,95339444,96904829,97226016,101168719,101460910,103560098,104051625,105213329,105444809,105605074,108051430,108206549,108487404,109069670,112782136,113823258,114556687,114581094,115697128,115728631,116531844,116822945,118045433,120540898,120734292,122808639,122871447,123788160,125346258,125991846,128161209,129711782,131971057,132477044,133434449,133844372,138298540,140182550,140586965,142236358,143225417,143632237,144897975,145478161,147313205,148615559,149473046,151964835,153558532,153607150,155499266,155580401,157193429,157808818,159054382,164746944,166422752,166453690,166629517,166862696,167077932,167222203,168161720,168284247,168766097,169628320,170904526,172726498,173212714,173821355,176089878,177794179,178319632,179820995,179869583,180600370,180992422,181798638,182195168,182612467,183922607,185263935,186812612,189278070,191371379,191529936,193075051,193307317,193684463,193939438,195156533,195484292,198067435,199822054,200154734,200719334,203128800,203616626,206171095,206777056,207983486,208360317,210547395,212506844,213478317,214944805,217741483,219020281,220542940,220783823,224112195,225746076,226065075,226905308,229389005,229863650,230668040,231194337,231764785,236327265,237147722,238624580,239949153,241981840,242845440,243892913,244017096,244160600,245127129,246576704,246610966,248887329,254886138,257421166,257841025,258468561,262629345,262665495,262762914,263027728,264229836,266123118,267667749,268874526,271003053,272371305,272904197,273299604,276890798,277819526,278784802,281035594,281658085,282958499,283402734,284239493,284773090,285026534,285515483,286009375,289353808,289428658,290983106,291017166,291695203,293068921,293084175,293414793,294445840,298140488,298222421,298665843,299614676,300124272,300315863,301669670,302294777,303354591,303708275,304306582,304924680,308204204,310166858,310727680,310896278,311550974,311693559,312298447,312773231,314249724,318855480,322624549,325306349,331678071,332532249,333186240,334045554,334295613,334752625,335019247,337516550,338405759,338996818,339763698,339899334,340132342,340795510,341116555,343424680,343611022,345417769,346347365,348097870,348261260,348776328,349500598,351418413,352664533,353408396,354449350,355755401,356796223,357460525,358292157,358416754,360011320,360079910,362145391,363234555,363438822,364928424,365024379,365538282,367614899,372971424,373348772,375585767,376890463,377564515,378912622,380189427,380659236,380880228,382703926,382995165,383519034,385283571,387825679,389058508,389313630,389910494,390653935,392445625,393487349,393958446,395245624,395492856,397431804,398082099,400598455,400686579,403253702,403678723,405222823,405317212,407157192,408277694,412438744,413775940,415016507,415219991,418698794,423298204,423350581,425261493,426156524,426235865,427575935,428028330,430431796,432935904,433227271,433913255,434021017,434683477,435438804,437858207,438668874,438683619,439498831,439718290,443006180,446529542,449002765,450536872,452401398,453418334,454118900,455726329,456232318,456603378,458138179,459507264,460408329,461627484,461964842,464332703,464497564,466138859,467861035,468890929,469940202,470026554,472336404,472400093,472878399,473938566,474891699,475113346,476869200,477737466,477828507,477878434,480761205,481495011,482439667,485433478,487641801,488183219,489851845,491410871,493005254,493169116,494609881,499506408,502056317,502844009,503290103,505822061,507485567,508336407,511561764,511579408,515699165,517225501,518133008,518226911,519107220,520442400,520914712,525798712,527046372,527971816,530872751,532041816,533871877,534360006,536789796,537599343,539693765,539724460,541541070,541588961,542369991,544413729,546150435,546443734,547350265,548655173,549450196,550298282,551039142,555884301,555891567,559161289,561740141,561941178,562401959,563386462,564549841,566768771,567691477,569176194,569580314,575949890,578198155,578982027,580218740,581004033,583472360,585199059,585792484,585898907,586427773,590038877,590057018,590238769,590468380,590825839,591254539,591818188,592060089,593049903,597414549,598884830,599763447,601916233,602224485,603031916,603272640,603461240,604941229,605895944,606322194,608636231,612338014,615208238,616018077,616176033,617361022,618759805,620050821,620164443,622561882,626289692,626880004,629621957,630737575,630976938,631338366,634567980,635172621,635470131,636420717,636735376,638911217,640964740,643494983,644041705,650734408,651561500,652471013,656335212,657496902,657780036,657800319,661009608,661943410,663724973,665936391,665955867,666413759,666896952,668306278,668425104,671660080,672298631,675720848,675850467,676337119,676791485,678914881,682193154,684884375,687086291,687289044,688326654,688805517,688906840,689774052,693500433,694439783,695717378,696096390,697576315,699119677,700084838,700677712,701493809,701694566,701937397,703007627,704344737,707087284,708202625,708831405,708871437,709557730,709681509,711350997,714002453,714018685,714187041,714918313,716475606,717176954,717214219,719324100,719635705,721171279,721405376,722256336,724578781,726515524,727130958,727870552,728928708,730833659,731745520,732479026,733739169,734576801,737318078,743966639,744020403,746476494,746614338,749108696,749455331,751257857,752093345,753008955,753286896,753471644,755407473,756733629,756980419,757217074,758087455,758655449,758709389,758889848,762624660,763157678,765463195,765619991,766603386,767877533,768439551,769160809,770431082,770651798,773508942,776650514,777224043,777421126,777977615,778229427,779118106,781261110,783273202,783622451,786756121,788108772,788926126,790502325,797712880,799756012,800473552,801114800,802912146,802922943,803738996,805203848,805321445,805381056,807988674,809676893,815846526,818504672,821874013,822896361,823649914,823927420,824165179,824573829,825274383,825947487,826814013,827148472,828552957,832755181,832937699,834191669,834962652,836644759,837225252,838763304,840232208,845509639,851587645,852300110,853343156,854702560,856185391,858824325,858963867,859452283,861127311,861412347,862665826,862678758,864380345,865461085,871386868,873767170,874492133,874787104,876011808,876654909,877071302,877319588,878536993,880677047,881239887,881598639,881888628,883567019,884438668,884797082,885773728,887011459,889648065,891503932,893335464,893910176,895950263,896600877,898352618,899621329,901061628,901166144,901350385,901697713,902342948,904413299,904516917,905461196,907110699,907748371,910248594,910422311,910882806,912559732,913002234,918028097,919597742,920099850,921998778,922261728,923200623,924381388,924629636,926272617,929262340,932435837,934670279,935623266,936045126,938443014,939135676,941168116,941586662,943504394,945088728,947189986,949316674,951129193,953403358,953561021,955897323,958011752,959294514,959632657,963971474,964840067,966401177,966609676,970719919,971874537,972584348,972916703,975674317,975679210,977669038,979496732,980618570,980817727,983110557,984120047,984676004,985464753,986333295,987204952,987965771,989837914,990048311,990758846,991515606,992367201,993349328,993666396,995552914,996489140,998275927,999136057,999312751};
//        int[] arr = {5, 13, 14, 16, 17, 19, 31, 36, 42, 43, 49, 51, 55, 56, 59, 60, 61, 64, 66, 68, 69, 74, 84, 90, 91, 96, 106, 112, 117, 119, 125, 127, 134, 146, 149, 170, 180, 185, 187, 193, 194, 208, 237, 239, 276, 302, 306, 319, 320, 342, 383, 388, 446, 456, 487, 493, 513, 528, 550, 620, 627, 722, 732, 789, 799, 832, 833, 848, 892, 1003, 1015, 1168, 1188, 1276, 1292, 1345, 1376, 1442, 1623, 1642, 1890, 2065, 2091, 2177, 2224, 2334, 2657, 3058, 3341, 3383, 3522, 3600, 3776, 4299, 4948, 5406, 5474, 5699, 5824, 6110, 6956, 8006, 8747, 8857, 9221, 9424, 9886, 11255, 12954, 14153, 14331, 14920, 15248, 15996, 18211, 20960, 22900, 23188, 24141, 24672, 25882, 29466, 33914, 37053, 37519, 39920, 41878, 47677, 54874, 59953, 60707, 64592, 67760, 77143, 88788, 97006, 97295, 98226, 104512, 109638, 124820, 143662, 156959, 158933, 169104, 177398, 201963, 232450, 253965, 273616, 287036, 326783, 376112, 410924, 442720, 464434, 528746, 608562, 664889, 751470, 855529, 1075813, 1215904, 1315377, 1384275, 1740702, 1839600, 2239804, 2378530, 2816515, 3101647, 3587542, 3624079, 4557217, 4974782, 5394296, 5863883, 6914045, 7373732, 8125052, 8678115, 9487962, 10325382, 16212606, 16266515, 17956601, 19642680, 20921437, 21472514, 21569371, 22155601, 22315869, 22348829, 23382177, 24744190, 25384455, 25950853, 26943915, 27666746, 28529643, 29555755, 29701186, 30976053, 31054844, 31355415, 34942405, 36428853, 36955412, 39547263, 40758177, 43906680, 45731284, 48040976, 48228708, 49702781, 51141792, 51171363, 52938425, 55649186, 59995731, 62318488, 62783768, 62820298, 65091112, 65316443, 67790132, 68987169, 69846382, 71155953, 71639318, 71652349, 71977015, 75398449, 76205942, 76549451, 76816866, 76861772, 77131779, 77172054, 79056533, 79546053, 79870828, 81157165, 81289265, 81604300, 88182172, 89125801, 89784263, 90063463, 91015443, 91762411, 95034924, 97729391, 98048741, 100961360, 101406211, 101541418, 101968677, 103960619, 104226225, 109803136, 111431379, 111539339, 112582853, 113001580, 113939588, 114218142, 115040601, 115078094, 115365335, 118106477, 118344663, 118475333, 118708997, 118735133, 118997205, 119570244, 119848686, 122608021, 125473458, 126578568, 127004333, 130665989, 131202867, 138146443, 140514234, 143665938, 144380977, 145808099, 147883617, 150560223, 151292893, 151408605, 152267561, 153725460, 154502215, 156672053, 158186980, 158560367, 159994368, 160877072, 161655038, 163105348, 163176696, 163967944, 164163550, 164623450, 164849361, 166064322, 166311419, 168339135, 169290721, 172607428, 172735334, 173483256, 174422784, 175167427, 175387812, 175947457, 175960342, 177663326, 178131325, 181261301, 184482990, 185024563, 186341961, 190223422, 192014042, 193281734, 194398190, 194640710, 195171429, 196244585, 199684329, 200105397, 201507183, 209662066, 211955468, 212927440, 213138414, 213606974, 215255603, 218471753, 219613184, 221158499, 222179243, 222975976, 223776101, 224306395, 224691812, 226439293, 228119964, 228721061, 229791781, 230787932, 231591195, 234003774, 238188084, 244006649, 245761554, 247582944, 248569368, 251133491, 257076919, 257447605, 262897877, 263189263, 263287826, 263428493, 264148545, 265096883, 265113796, 265586292, 265886409, 266731363, 267891010, 268218747, 268364086, 268421497, 268784151, 269963001, 273733144, 273894053, 273921412, 274075443, 274284864, 275337322, 283126467, 283306255, 285225809, 285553517, 286448387, 286693319, 287407516, 288071842, 290350201, 293080149, 293241603, 295277363, 295444785, 301752400, 302488459, 302637883, 303434286, 304916779, 305466920, 307021028, 311199855, 311600806, 312861823, 315731867, 316163489, 322635814, 323028701, 324479206, 327435030, 327522979, 327955361, 328312166, 328825254, 329846470, 329885937, 330610102, 330844937, 332153990, 332882746, 333249320, 334913140, 335467195, 335475709, 337089707, 337203343, 339366533, 342885013, 343079373, 344456166, 346781709, 347052836, 352255077, 353931865, 356306884, 356307550, 358706823, 359163801, 361472969, 362869832, 363484755, 363629303, 366350561, 366404266, 366925948, 370290031, 372715301, 374632935, 374737005, 375322760, 376034333, 376536792, 378523444, 381620806, 382106886, 382134268, 382341368, 382392260, 389808210, 391546384, 391824428, 392591990, 393078456, 394289962, 398946236, 402308935, 405252696, 405628316, 405825766, 406297277, 406484174, 407190458, 408887683, 409564446, 410902453, 411298266, 412106155, 413331663, 414768451, 415430672, 416821379, 418570168, 418924945, 419146691, 419827872, 423034892, 424498085, 426086270, 428365550, 429836685, 431468300, 432510647, 432978113, 433037839, 433174355, 433378659, 434132884, 434157504, 434999499, 436345136, 436543428, 436573791, 443101241, 443466765, 446243174, 447232810, 449585541, 450072420, 450911701, 451277649, 451404023, 452982645, 454800372, 455665711, 456226451, 456891790, 456897499, 457656036, 460829262, 462205719, 462990934, 463459200, 464918484, 465917985, 466490662, 467389140, 467729213, 468916829, 472178508, 473610068, 473962839, 475025507, 478443235, 479244082, 479945246, 480079327, 480894274, 483397097, 483663064, 484816108, 485205173, 485854716, 488552611, 490790695, 491370681, 492363765, 492707120, 492997588, 497022704, 499373639, 500800979, 501579039, 503065584, 503457163, 503750725, 505946865, 506185741, 508915189, 510172510, 511405467, 511722314, 512400303, 512861703, 513305074, 517018183, 517098897, 517210089, 517522041, 518520825, 518576409, 519590554, 519959167, 520005694, 520158957, 520542986, 523189427, 525190290, 526887381, 528623797, 528842121, 530088640, 532701413, 534721838, 534742825, 534836331, 535927554, 536034488, 536304285, 537065871, 537508894, 539621967, 542453088, 544280579, 544364248, 545018317, 545321410, 547774583, 548277930, 552678309, 552911085, 554696626, 555610130, 556640531, 557455625, 557535195, 558959123, 560230834, 560251005, 561866016, 562023320, 564938502, 568119382, 568791989, 569530409, 571080777, 571678385, 573786534, 574293595, 574767977, 575337908, 578612469, 581701522, 582442430, 582748482, 583320622, 583575772, 585119491, 586688972, 587198523, 589084194, 590337844, 591156512, 591438191, 591480562, 592909366, 594041872, 594276243, 595062602, 595528447, 600361011, 601079117, 601275826, 601482383, 602108118, 602506544, 603038812, 605017349, 605460907, 607313197, 607459213, 608560985, 610959453, 611182702, 611254437, 611919600, 615343876, 617584166, 621278996, 622248427, 622373177, 622375941, 623241227, 623737544, 626435533, 627813172, 628834032, 630807597, 633287234, 635248694, 636249357, 637086517, 638381737, 638524604, 638667272, 640169338, 640534134, 641864980, 642961812, 643014747, 643420664, 644146144, 648219052, 648343412, 648661292, 650912490, 651085703, 651805172, 654737473, 654866604, 655028258, 655601382, 657073935, 660288177, 662897132, 664107169, 664138539, 665838191, 666449567, 667823682, 668497884, 670920155, 673682294, 676368098, 677880642, 678209859, 678521675, 679448118, 680624312, 681679202, 683085020, 684340386, 685215291, 686680249, 688255106, 690508395, 690917614, 692546218, 693747822, 693820774, 694134094, 694609636, 696103022, 697463432, 698831390, 700137858, 700585437, 702422646, 702489657, 703758590, 703988406, 704200533, 705986107, 706851531, 707051871, 708030822, 708517405, 709802913, 712018525, 712996117, 715909564, 716145880, 716704333, 717016377, 717415107, 717808563, 718271108, 718897590, 718948486, 719908631, 720620123, 721486317, 721833841, 722598937, 723914712, 726767358, 726836660, 727520735, 730071823, 730228799, 730816548, 732691378, 732699345, 733612196, 734076468, 735263822, 735975681, 736942915, 737303590, 737421500, 740936646, 743171675, 743754438, 744330498, 748574032, 749389842, 753285951, 758034720, 758741226, 758847354, 759038819, 761358508, 761771675, 762684279, 763886103, 765085655, 766220457, 772098048, 772542261, 772968564, 774442145, 775512913, 775713446, 776204637, 776354343, 780360770, 781144168, 781347527, 781388522, 782648750, 783329981, 783341625, 785599797, 788027251, 788607922, 789547377, 794195842, 794546883, 794739764, 795752014, 797246005, 800470528, 800522747, 801299299, 802320702, 803748586, 807316472, 808068573, 809018049, 811052948, 812880398, 815125284, 816032609, 816732886, 817836694, 819459609, 823392532, 824809001, 825111534, 826402741, 827690462, 830954002, 832827792, 833323061, 833374183, 834016651, 835530457, 835873040, 835880003, 837008521, 837846061, 838849871, 839073815, 840720880, 841784131, 845372184, 845872325, 848241481, 848416985, 850150125, 852023616, 852422382, 854041603, 854106489, 859545219, 859708129, 860171259, 860196889, 861678124, 861721996, 862137344, 862728204, 863156123, 864163541, 864272572, 865312658, 866174288, 867544432, 869147474, 869963337, 870200604, 870395374, 872013196, 872526870, 873093195, 873975029, 875197704, 878437107, 879424482, 880660024, 884348472, 884371692, 888123902, 888328908, 890736202, 891475142, 892465301, 892957982, 893516544, 893542476, 894364091, 896045077, 897949998, 898616671, 899067373, 899307815, 900335859, 901868784, 902668813, 902986510, 903339921, 903541670, 903723277, 904058127, 905493579, 906839262, 908201805, 909452879, 911813708, 912559279, 912876814, 914253236, 914394593, 916269800, 917245660, 919735906, 921984528, 922020030, 922400168, 923264027, 923932531, 924316559, 925172435, 927742610, 927907713, 929476653, 930580374, 933122208, 934480953, 935005693, 936581973, 939570874, 940304854, 940445990, 942696387, 946085496, 948044063, 949648547, 950666824, 952680005, 953049454, 954691204, 954911093, 956361292, 956811431, 957519656, 958424971, 959093182, 959546337, 959732787, 961929627, 963241081, 964111775, 965643422, 966757654, 967492085, 967595430, 967644579, 967993298, 969771618, 971115680, 971862743, 972175153, 972771302, 973225284, 975262205, 975509032, 976490474, 978248862, 979388063, 980202338, 981000609, 981511645, 981760879, 983554486, 985027375, 986661807, 987309295, 987849362, 990414734, 993926632, 993936472, 993977492, 994949982, 995318152, 995327525};
        System.out.println(projectFilterController.lenLongestFibSubseq(arr));
    }
}
